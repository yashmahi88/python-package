name: Call Package Workflows

on:
  push:
    branches:
      - development
      - release

jobs:
  call_setup_and_build:
    uses: yashmahi88/.github/.github/workflows/build-environment.yml@main
    with:
      LANGUAGE: ${{ vars.LANGUAGE }}

  call_package_and_upload:
    needs: call_setup_and_build
    uses: yashmahi88/.github/.github/workflows/publish-package.yml@main
    with:
      LANGUAGE: ${{ vars.LANGUAGE }}

  debug_secrets:
    runs-on: ubuntu-latest
    needs: call_package_and_upload
    steps:
      - name: Debug Secrets
        run: |
          echo "NEXUS_USERNAME: ${{ secrets.NEXUS_USERNAME }}"
          echo "NEXUS_PASSWORD: ${{ secrets.NEXUS_PASSWORD }}"

  call_push_to_nexus:
    needs: call_package_and_upload
    uses: yashmahi88/.github/.github/workflows/push-nexus.yml@main
    with:
      secrets: inherit